FC          = gfortran
FDEBUG      = -ffixed-line-length-132 -fno-second-underscore -g
FOPTIMIZED  = -ffixed-line-length-132 -fno-second-underscore -O
#
LIB    = -L/home/volans/tepper/hdf5/lib -L/home/volans/tepper/hdf5/HDF5_Wrapper/lib/ -lhdf5 -lhdfwrapper
INC     = -I/home/volans/tepper/hdf5/include  -I/home/volans/tepper/hdf5/HDF5_Wrapper/lib/

FFLAGS = $(FDEBUG)

TARGET = read_spec_hdf5

OBJECTS = read_spec_hdf5.o
MODULES = rw_modules.o

read_spec_hdf5: $(OBJECTS) rw_subroutines.o $(MODULES) rw_modules.f
	$(FC) $(FFLAGS) $(INC) $(LIB) $(OBJECTS) rw_subroutines.o $(MODULES) -o $(TARGET)

read_spec_hdf5.o: read_spec_hdf5.f  rw_subroutines.o $(MODULES)
	$(FC) $(FFLAGS) $(INC) read_spec_hdf5.f -c

rw_subroutines.o:  rw_subroutines.f $(MODULES)
	$(FC) $(FFLAGS) $(INC) rw_subroutines.f -c

rw_modules.o:  rw_modules.f
	$(FC) $(FFLAGS) $(INC) rw_modules.f -c

clean:
	rm read_spec_*.o
	rm *.mod
